<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Wealth Wallet Puzzle - Can You Solve It?">
    <meta property="og:description" content="Solve the interactive puzzle to discover the complete Wealth Wallet approach to financial planning.">
    <meta property="og:image" content="https://wealthwallet.ch/wp-content/uploads/2024/12/wwlogo-final-new-1.png">
    <title>Wealth Wallet Puzzle - Interactive Financial Planning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom right, #f1f5f9, #cbd5e1);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        
        .container {
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            padding: 32px;
            max-width: 800px;
            width: 100%;
        }
        
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        h1 {
            font-size: 32px;
            font-weight: bold;
            background: linear-gradient(to right, #2563eb, #1e3a8a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .shuffle-btn {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: linear-gradient(to right, #3b82f6, #2563eb);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        
        .shuffle-btn:hover {
            background: linear-gradient(to right, #2563eb, #1e40af);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        
        .win-message {
            display: none;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: linear-gradient(to right, #f0fdf4, #dcfce7);
            border: 2px solid #4ade80;
            border-radius: 12px;
            margin-bottom: 24px;
        }
        
        .win-message.show {
            display: flex;
            animation: pulse 1s ease-in-out infinite;
        }
        
        .win-icon {
            width: 32px;
            height: 32px;
            color: #16a34a;
        }
        
        .win-text {
            font-size: 20px;
            font-weight: bold;
            color: #166534;
        }
        
        .puzzle-wrapper {
            position: relative;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.06);
            margin: 0 auto;
            max-width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 320px;
        }
        
        .puzzle-area {
            position: relative;
            width: 520px;
            height: 280px;
            margin: 0 auto;
        }
        
        .puzzle-piece {
            transition: transform 0.2s ease;
            cursor: move;
            touch-action: none;
        }
        
        .puzzle-piece:hover {
            transform: scale(1.05);
        }
        
        .puzzle-piece:active {
            opacity: 0.7;
        }
        
        .slot {
            position: absolute;
            width: 130px;
            height: 130px;
        }
        
        .piece-content {
            position: absolute;
            left: 0;
            top: 0;
        }
        
        .icon-container {
            position: absolute;
            left: 15px;
            top: 15px;
            width: 100px;
            height: 100px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        
        .icon-svg {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .icon-label {
            color: white;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            margin-top: 8px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            padding: 0 8px;
        }
        
        .logo-reveal {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            opacity: 0;
            padding: 24px;
        }
        
        .logo-reveal img {
            max-width: 80%;
            max-height: 80%;
            object-fit: contain;
        }
        
        .fade-out {
            animation: fadeOut 1s ease-out forwards;
        }
        
        .fade-in {
            animation: fadeIn 1s ease-in 0.5s forwards;
        }
        
        @keyframes fadeOut {
            from { opacity: 1; }
            to { opacity: 0; }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
        
        .instruction {
            text-align: center;
            color: #64748b;
            font-size: 14px;
            margin-top: 24px;
        }
        
        .footer {
            text-align: center;
            margin-top: 24px;
        }
        
        .footer-text {
            color: #64748b;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .footer-link {
            color: #2563eb;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer-link:hover {
            color: #1e40af;
        }
        
        @media (max-width: 640px) {
            .container {
                padding: 16px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .header {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .shuffle-btn {
                width: 100%;
                justify-content: center;
            }
            
            .puzzle-wrapper {
                padding: 16px;
                min-height: 580px;
            }
            
            .puzzle-area {
                width: 280px;
                height: 520px;
            }
            
            .instruction {
                font-size: 13px;
            }
            
            .footer-text {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Wealth Wallet Puzzle</h1>
            <button id="shuffleBtn" class="shuffle-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/>
                </svg>
                Shuffle
            </button>
        </div>

        <div id="winMessage" class="win-message">
            <svg class="win-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18M4 22h16M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/>
                <path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/>
            </svg>
            <span class="win-text">Puzzle Complete! ðŸŽ‰</span>
        </div>

        <div class="puzzle-wrapper">
            <div id="puzzleArea" class="puzzle-area"></div>
            
            <div id="logoReveal" class="logo-reveal">
                <img 
                    src="https://wealthwallet.ch/wp-content/uploads/2024/12/wwlogo-final-new-1.png?w=420&h=232" 
                    alt="Wealth Wallet Logo"
                />
            </div>
        </div>

        <p id="instructionText" class="instruction">
            Drag and drop pieces to complete the puzzle
        </p>
        
        <div class="footer">
            <p class="footer-text">Learn more about comprehensive financial planning</p>
            <a href="https://wealthwallet.ch" target="_blank" class="footer-link">
                Visit WealthWallet.ch â†’
            </a>
        </div>
    </div>

    <script>
        const icons = {
            coins: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/><path d="m16.71 13.88.7.71-2.82 2.82"/></svg>',
            piggyBank: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M19 5c-1.5 0-2.8 1.4-3 2-3.5-1.5-11-.3-11 5 0 1.8 0 3 2 4.5V20h4v-2h3v2h4v-4c1-.5 1.5-1 2-2h2v-4h-2c0-1-.5-1.5-1-2h0V5z"/><path d="M2 9v1c0 1.1.9 2 2 2h1"/><path d="M16 11h0"/></svg>',
            umbrella: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M22 12a10.06 10.06 0 0 0-20 0Z"/><path d="M12 12v8a2 2 0 0 0 4 0"/><path d="M12 2v1"/></svg>',
            sprout: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M7 20h10"/><path d="M10 20c5.5-2.5.8-6.4 3-10"/><path d="M9.5 9.4c1.1.8 1.8 2.2 2.3 3.7-2 .4-3.5.4-4.8-.3-1.2-.6-2.3-1.9-3-4.2 2.8-.5 4.4 0 5.5.8z"/><path d="M14.1 6a7 7 0 0 0-1.1 4c1.9-.1 3.3-.6 4.3-1.4 1-1 1.6-2.3 1.7-4.6-2.7.1-4 1-4.9 2z"/></svg>',
            home: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>',
            briefcase: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>',
            calendar: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>',
            castle: '<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2.5"><path d="M2 20h20"/><path d="M10 18H6V6l4 2v10Z"/><path d="M14 18h4V6l-4 2v10Z"/><path d="M6 6l4-4 4 4 4-4v16"/></svg>'
        };

        const labels = ['Financials', 'Projection', 'Retirement', 'Investment', 'Mortgage Planning', 'Portfolio Management', 'Life Events', 'Wealth Planning'];
        const iconKeys = ['coins', 'piggyBank', 'umbrella', 'sprout', 'home', 'briefcase', 'calendar', 'castle'];

        let pieces = [];
        let draggedPiece = null;
        let isWon = false;
        let isMobile = window.innerWidth <= 640;

        const puzzleLayoutDesktop = [
            { id: 0, correctSlot: 0, top: 'flat', right: 'out', bottom: 'in', left: 'flat' },
            { id: 1, correctSlot: 1, top: 'flat', right: 'in', bottom: 'out', left: 'in' },
            { id: 2, correctSlot: 2, top: 'flat', right: 'out', bottom: 'in', left: 'out' },
            { id: 3, correctSlot: 3, top: 'flat', right: 'flat', bottom: 'out', left: 'in' },
            { id: 4, correctSlot: 4, top: 'out', right: 'in', bottom: 'flat', left: 'flat' },
            { id: 5, correctSlot: 5, top: 'in', right: 'out', bottom: 'flat', left: 'out' },
            { id: 6, correctSlot: 6, top: 'out', right: 'in', bottom: 'flat', left: 'in' },
            { id: 7, correctSlot: 7, top: 'in', right: 'flat', bottom: 'flat', left: 'out' }
        ];

        const puzzleLayoutMobile = [
            { id: 0, correctSlot: 0, top: 'flat', right: 'out', bottom: 'in', left: 'flat' },
            { id: 1, correctSlot: 1, top: 'flat', right: 'flat', bottom: 'out', left: 'in' },
            { id: 2, correctSlot: 2, top: 'out', right: 'in', bottom: 'in', left: 'flat' },
            { id: 3, correctSlot: 3, top: 'in', right: 'flat', bottom: 'out', left: 'out' },
            { id: 4, correctSlot: 4, top: 'out', right: 'out', bottom: 'in', left: 'flat' },
            { id: 5, correctSlot: 5, top: 'in', right: 'flat', bottom: 'out', left: 'in' },
            { id: 6, correctSlot: 6, top: 'out', right: 'in', bottom: 'flat', left: 'flat' },
            { id: 7, correctSlot: 7, top: 'in', right: 'flat', bottom: 'flat', left: 'out' }
        ];

        function getPuzzleLayout() {
            return isMobile ? puzzleLayoutMobile : puzzleLayoutDesktop;
        }

        function getPuzzlePath(piece) {
            const w = 100, h = 100, nub = 15;
            let path = 'M 0 0';
            
            if (piece.top === 'out') path += ` L ${w/2 - nub} 0 Q ${w/2 - nub} ${-nub} ${w/2} ${-nub} Q ${w/2 + nub} ${-nub} ${w/2 + nub} 0`;
            else if (piece.top === 'in') path += ` L ${w/2 - nub} 0 Q ${w/2 - nub} ${nub} ${w/2} ${nub} Q ${w/2 + nub} ${nub} ${w/2 + nub} 0`;
            path += ` L ${w} 0`;
            
            if (piece.right === 'out') path += ` L ${w} ${h/2 - nub} Q ${w + nub} ${h/2 - nub} ${w + nub} ${h/2} Q ${w + nub} ${h/2 + nub} ${w} ${h/2 + nub}`;
            else if (piece.right === 'in') path += ` L ${w} ${h/2 - nub} Q ${w - nub} ${h/2 - nub} ${w - nub} ${h/2} Q ${w - nub} ${h/2 + nub} ${w} ${h/2 + nub}`;
            path += ` L ${w} ${h}`;
            
            if (piece.bottom === 'out') path += ` L ${w/2 + nub} ${h} Q ${w/2 + nub} ${h + nub} ${w/2} ${h + nub} Q ${w/2 - nub} ${h + nub} ${w/2 - nub} ${h}`;
            else if (piece.bottom === 'in') path += ` L ${w/2 + nub} ${h} Q ${w/2 + nub} ${h - nub} ${w/2} ${h - nub} Q ${w/2 - nub} ${h - nub} ${w/2 - nub} ${h}`;
            path += ` L 0 ${h}`;
            
            if (piece.left === 'out') path += ` L 0 ${h/2 + nub} Q ${-nub} ${h/2 + nub} ${-nub} ${h/2} Q ${-nub} ${h/2 - nub} 0 ${h/2 - nub}`;
            else if (piece.left === 'in') path += ` L 0 ${h/2 + nub} Q ${nub} ${h/2 + nub} ${nub} ${h/2} Q ${nub} ${h/2 - nub} 0 ${h/2 - nub}`;
            path += ' Z';
            
            return path;
        }

        function getSlotPosition(slotId) {
            if (isMobile) {
                const row = Math.floor(slotId / 2);
                const col = slotId % 2;
                return { left: col * 120 + 20, top: row * 120 + 20 };
            } else {
                const row = Math.floor(slotId / 4);
                const col = slotId % 4;
                return { left: col * 120 + 20, top: row * 120 + 20 };
            }
        }

        function shufflePuzzle() {
            const layout = getPuzzleLayout();
            const shuffled = [...layout].sort(() => Math.random() - 0.5);
            pieces = shuffled.map((piece, idx) => ({ ...piece, currentSlot: idx }));
            isWon = false;
            document.getElementById('winMessage').classList.remove('show');
            document.getElementById('instructionText').textContent = 'Drag and drop pieces to complete the puzzle';
            renderPuzzle();
        }

        function checkWin() {
            const won = pieces.every(piece => piece.id === piece.currentSlot);
            if (won && !isWon) {
                isWon = true;
                document.getElementById('winMessage').classList.add('show');
                document.getElementById('instructionText').textContent = 'Great job! The Wealth Wallet logo is revealed!';
                
                document.getElementById('puzzleArea').classList.add('fade-out');
                document.getElementById('logoReveal').classList.add('fade-in');
            }
        }

        function renderPuzzle() {
            const puzzleArea = document.getElementById('puzzleArea');
            if (!puzzleArea) return;
            
            puzzleArea.innerHTML = '';
            puzzleArea.classList.remove('fade-out');
            
            const logoReveal = document.getElementById('logoReveal');
            if (logoReveal) {
                logoReveal.classList.remove('fade-in');
                logoReveal.style.opacity = '0';
            }
            
            if (isMobile) {
                puzzleArea.style.width = '280px';
                puzzleArea.style.height = '520px';
            } else {
                puzzleArea.style.width = '520px';
                puzzleArea.style.height = '280px';
            }
            
            for (let slotId = 0; slotId < 8; slotId++) {
                const piece = pieces.find(p => p && p.currentSlot === slotId);
                const pos = getSlotPosition(slotId);
                
                const slotDiv = document.createElement('div');
                slotDiv.className = 'slot';
                slotDiv.style.left = pos.left + 'px';
                slotDiv.style.top = pos.top + 'px';
                slotDiv.dataset.slot = slotId;
                
                slotDiv.addEventListener('dragover', handleDragOver);
                slotDiv.addEventListener('drop', handleDrop);
                slotDiv.addEventListener('touchmove', handleTouchMove);
                slotDiv.addEventListener('touchend', handleTouchEnd);
                
                if (piece) {
                    const pieceDiv = document.createElement('div');
                    pieceDiv.className = 'puzzle-piece piece-content';
                    pieceDiv.draggable = true;
                    pieceDiv.dataset.slot = slotId;
                    
                    pieceDiv.addEventListener('dragstart', handleDragStart);
                    pieceDiv.addEventListener('touchstart', handleTouchStart);
                    
                    const colorStop1 = Math.floor(piece.id / 4) === 0 ? '#60A5FA' : '#1E40AF';
                    const colorStop2 = Math.floor(piece.id / 4) === 0 ? '#3B82F6' : '#1E3A8A';
                    
                    pieceDiv.innerHTML = `
                        <svg width="130" height="130" viewBox="-15 -15 130 130" style="filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1)); overflow: visible;">
                            <defs>
                                <linearGradient id="grad${piece.id}" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:${colorStop1};stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:${colorStop2};stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="${getPuzzlePath(piece)}" fill="url(#grad${piece.id})" stroke="none"/>
                        </svg>
                        <div class="icon-container">
                            ${icons[iconKeys[piece.id]]}
                            <span class="icon-label">${labels[piece.id]}</span>
                        </div>
                    `;
                    
                    slotDiv.appendChild(pieceDiv);
                }
                
                puzzleArea.appendChild(slotDiv);
            }
        }

        let touchStartSlot = null;

        function handleTouchStart(e) {
            touchStartSlot = parseInt(e.currentTarget.dataset.slot);
            e.currentTarget.style.opacity = '0.5';
        }

        function handleTouchMove(e) {
            e.preventDefault();
        }

        function handleTouchEnd(e) {
            e.preventDefault();
            const touch = e.changedTouches[0];
            const element = document.elementFromPoint(touch.clientX, touch.clientY);
            const targetSlot = element?.closest('.slot')?.dataset.slot;
            
            if (touchStartSlot !== null && targetSlot !== undefined) {
                handleSwap(touchStartSlot, parseInt(targetSlot));
            }
            
            if (e.currentTarget) {
                e.currentTarget.style.opacity = '1';
            }
            touchStartSlot = null;
        }

        function handleDragStart(e) {
            draggedPiece = parseInt(e.currentTarget.dataset.slot);
        }

        function handleDragOver(e) {
            e.preventDefault();
        }

        function handleDrop(e) {
            e.preventDefault();
            if (draggedPiece === null) return;
            
            const targetSlot = parseInt(e.currentTarget.dataset.slot);
            handleSwap(draggedPiece, targetSlot);
            draggedPiece = null;
        }

        function handleSwap(fromSlot, toSlot) {
            if (isNaN(toSlot) || fromSlot === toSlot) return;
            
            const draggedIndex = pieces.findIndex(p => p.currentSlot === fromSlot);
            const targetIndex = pieces.findIndex(p => p.currentSlot === toSlot);
            
            if (draggedIndex === -1 || targetIndex === -1) return;
            
            [pieces[draggedIndex].currentSlot, pieces[targetIndex].currentSlot] = 
            [pieces[targetIndex].currentSlot, pieces[draggedIndex].currentSlot];
            
            renderPuzzle();
            checkWin();
        }

        window.addEventListener('resize', () => {
            const wasMobile = isMobile;
            isMobile = window.innerWidth <= 640;
            if (wasMobile !== isMobile) {
                shufflePuzzle();
            }
        });

        document.getElementById('shuffleBtn').addEventListener('click', shufflePuzzle);
        
        shufflePuzzle();
    </script>
</body>
</html>